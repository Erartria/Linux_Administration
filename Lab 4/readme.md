Лабораторная работа № 4. Установка программного обеспечения
===
**Задачи:**
---
  1. Научиться получать информацию об установленных и доступных пакетах и устанавливать пакеты
программного обеспечения из репозиториев в Linux.
  2. Научиться устанавливать программные продукты из исходных кодов в Linux.
  3. Научится конфигурировать менеджер пакетов и создавать собственные репозитории.


**Рекомендации:**
---
1. Программные продукты под Linux распространяются или в виде готовых бинарных пакетов (с расширением deb для ветви Debian и расширением rpm для ветви RedHat) или в виде исходных кодов.
2. Из бинарного пакета программное обеспечение устанавливается с помощью специального ПО — менеджера пакетов (например, **dpkg** и **apt** для Debian ветви и **rpm** или **dnf** (в ранних версиях **yum**) для ветви RedHat). Менеджеры пакетов также позволяют работать с репозиториями — коллекциями пакетов, некоторые из которых поддерживаются производителями дистрибутивов. На работу с такими репозиториями, как правило, по умолчанию настроена система.
3. Для установки, обновления и просмотра информации о пакетах из сетевого репозитория используется менеджер пакетов **dnf**.
4. Исходный код программ, в большинстве случаев, распространяется в архивах. Для создания этих архивов, как правило, используются две программы: **tar** и **gzip**. Первая собирает все исходные файлы, включая структуру каталогов в один общий файл, а вторая сжимает этот файл для того, чтобы сэкономить время передачи архива по сети.
5. Сборка и установка пакетов из исходных кодов осуществляется с помощью последовательного запуска команд: **``make make install``** Эти команды должны быть запущены так, чтобы текущим каталогом при этом был каталог с исходным кодом устанавливаемого пакета, содержащий файл с именем Makefile.
6. Для создания собственного репозитория должен быть установлен и использован пакет **createrepo**.
7. Для каждого репозитория в системе должен быть конфигурационный файл. Эти файлы располагаются в каталоге: **```/etc/yum.repos.d```**. Файл обязан иметь расширение .repo. Файл имеет следующую структуру (курсивом отмечены изменяемые значения): 
    ```bash
    [название_репозитория] 
    name=название_репозитория 
    mirrorlist=список_адресов_репозитория 
    enabled=значение_флага_доступности 
    gpgcheck=значение_флага_проверки_цифровой_подписи
    ```
    *Примечания*: Если репозиторий находится в локальном доступе, то в качестве адреса указывается: **``file://полный_путь_к_каталогу/``** Если пакеты получены из  надежных источников, значение флага проверки цифровой подписи можно поставить равное 0 и не настраивать проверку ключей.
  
8. В случае необходимости установить приложение, существующее в виде пакета Debian, необходимо воспользоваться утилитой **alien**. Если её нет в стандартном репозитории, можно найти репозиторий, содержащий эту утилиту или установить её из исходного кода.

**Задание:**
---
*Выполните указанные ниже действия и запишите все использовавшиеся команды с параметрами и изменения в
файлах в отдельный файл:*
  1. выводит в файл work3.log построчно список всех пользователей в системе в следующем формате: «user NNN has id MM»;
  2. добавляет в файл work3.log строку, содержащую дату последней смены пароля для пользователя root;
  3. добавляет в файл work3.log список всех групп в системе (только названия групп) через запятую;
  4. делает так, чтобы при создании нового пользователя у него в домашнем каталоге создавался файл readme.txt с текстом «Be careful!»;
  5. создает пользователя u1 с паролем 12345678;
  6. создает группу g1;
  7. делает так, чтобы пользователь u1 дополнительно входил в группу g1;
  8. добавляет в файл work3.log строку, содержащую сведения об идентификаторе и имени пользователя u1 и идентификаторах и именах всех групп, в которые он входит;
  9. делает так, чтобы пользователь user дополнительно входил в группу g1
  10. добавляет в файл work3.log строку с перечнем пользователей в группе g1 через запятую;
  11. делает так, что при входе пользователя u1 в систему вместо оболочки bash автоматически запускается /usr/bin/mc, при выходе из которого пользователь возвращается к вводу логина и пароля;
  12. создает пользователя u2 с паролем 87654321;
  13. в каталоге /home создает каталог test13, в который копирует файл work3.log два раза с разными именами (work3-1.log и work3-2.log);
  14. сделает так, чтобы пользователи u1 и u2 смогли бы просматривать каталог test13 и читать эти файлы, только пользователь u1 смог бы изменять и удалять их, а все остальные пользователи системы не могли просматривать содержимое каталога test13 и файлов в нем. При этом никто не должен иметь права исполнять эти файлы;
  15. создает в каталоге /home каталог test14, в который любой пользователь системы сможет записать данные, но удалить любой файл сможет только пользователь, который его создал или пользователь u1;
  16. копирует в каталог test14 исполняемый файл редактора nano и делает так, чтобы любой пользователь смог изменять с его помощью файлы, созданные в пункте 13;
  17. создает каталог test15 и создает в нем текстовый файл /test15/secret_file. Делает так, чтобы содержимое этого файла можно было вывести на экран, используя полный путь, но чтобы узнать имя этого файла, было бы невозможно.
*Отдельно создать второй скрипт, который полностью уничтожает результаты деятельности предыдущего: удаляет созданных пользователей и их домашние каталоги, удаляет созданные группы, удаляет все созданные в предыдущем скрипте файлы и каталоги.*

Лабораторная работа № 3. Управление пользователями, группами пользователей и правами на файлы и каталоги в Linux
===
**Задачи:**
---
  1. Научиться создавать, изменять и редактировать учетные записи пользователей и групп пользователей в Linux.
  2. научиться задавать атрибуты прав и владения для файлов и каталогов под конкретные задачи


**Подсказки:**
---
  1. В работе используются следующие команды (в дополнение к изученным в предыдущих лабораторных работах): groupadd, useradd, groupdel, userdel, groupmod, usermod, openssl, chage, chmod, chgrp, chown, groups, id.
  2. Сведения о пользователях системы и их идентификаторах (UID) хранятся в файле /etc/passwd
  3. Для вывода результата работы команды или конвейера команд в новый файл используется конструкция: command > file
  4. Для добавления результатов работы команды или конвейера команд в конец существующего файла используется конструкция: command >> file
  5. Директория /etc/skel содержит копии различных установочных и других файлов, которые могут быть скопированы в новые домашние директории пользователей, когда программа useradd добавляет нового пользователя.
  6. Для шифрования пароля можно использовать команду openssl passwd –crypt незашифрованный_пароль. Для того чтобы результат выполнения команды command2 подставить в значение параметра p команды command1 можно использовать конструкцию: command1 –p $(command2)
  7. Для получения подробного справочного руководства по любой команде можно набрать в консоли «man название команды».
  8. Для удобства работы можно пользоваться одновременно несколькими консолями. На одной консоли читать справочное руководство, на другой редактировать скрипт и т.п. Переключаться между ними можно нажатием комбинации клавиш Ctrl+Alt+Fn, где Fn – функциональная клавиша (F1 – для первой консоли, F2 – для второй, а вот 7-я консоль обычно занята графическим интерфейсом). 

**Задание:**
---
*Создать скрипт, который:*
  1. 1. Установите из сетевого репозитория пакеты, входящие в группу «Developments Tools».
  2. Установите из исходных кодов, приложенных к методическим указаниям пакет bastet-0.43. Для этого необходимо создать отдельный каталог и скопировать в него исходные коды проекта bastet. Вы можете использовать подключение сетевого каталога в хостовой операционной системе для передачи архива с исходными кодами в виртуальную машину. Далее следует распаковать архив до появления каталога с исходными файлами (в каталоге должен отображаться Makefile). После этого соберите пакет bastet и запустите его, чтобы удостовериться, что он правильно собрался. Затем модифицируйте Makefile, добавив в него раздел install. Обеспечьте при установке копирование исполняемого файла в /usr/bin с установкой соответствующих прав доступа. Выполните установку и проверьте, что любой пользователь может запустить установленный пакет.
  3. Создайте файл task3.log, в который выведите список всех установленных пакетов.
  4. Создайте файл task4_1.log, в который выведите список всех пакетов (зависимостей), необходимых для установки и работы компилятора gcc. Создайте файл task4_2.log, в который выведите список всех пакетов (зависимостей), установка которых требует установленного пакета libgcc.
  5. Создайте каталог localrepo в домашнем каталоге пользователя root и скопируйте в него пакет checkinstall-1.6.2-3.el6.1.x86_64.rpm , приложенный к методическим указаниям. Создайте собственный локальный репозиторий с именем localrepo из получившегося каталога с пакетом.
  6. Создайте файл task6.log, в который выведите список всех доступных репозиториев.
  7. Настройте систему на работу только с созданным локальным репозиторием (достаточно переименовать конфигурационные файлы других репозиториев). Выведите на экран список доступных для установки пакетов и убедитесь, что доступен только один пакет, находящийся в локальном репозитории. Установите этот пакет.
  8. Скопируйте в домашний каталог пакет fortunes-ru_1.52-2_all, приложенный к методическим рекомендациям, преобразуйте его в rpm пакет и установите.
  9. Скачайте из сетевого репозитория пакет nano. Пересоберите пакет таким образом, чтобы после его установки менеджером пакетов, появлялась возможность запустить редактор nano из любого каталога, введя команду newnano.
  10. Предъявите преподавателю изменения в системе и файл с описанием использованных команд.
**Назначение команд:**
---
* **`tar`** - встроенный архиватор, совместима с ОС Windows

  **`$tar опции архив.tar файлы_для_архивации`** - архивация файлов

  **`$tar опции архив.tar`** - разархивация tar-архива
  
   **Основные функции:**
   
   * **`-A`** - Присоединить существующий архив к другому;
   * **`-c`** - Создать новый архив;
   * **`--diff`** - Проверить различие между архивами;
   * **`--delete`** - Удалить из существующего архива файл;
   * **`-r`** - Присоединить файлы к концу архива;
   * **`-t`** - Сформировать список содержимого архива;
   * **`-u`** - Обновить архив более новыми файлами с тем же именем.
   * **`x`** - Извлечь файлы из архива
   
   *При определении каждой функции используются параметры, которые регламентируют выполнение конкретных операций с tar-архивом:*

   **Основные параметры:**

   * **`-C dir`** - Сменить директорию перед выполнением операции на dir
   * **`-f file`** - Вывести результат в файл (или на устройство) file;
   * **`-j`** - Перенаправить вывод в команду *bzip2*;
   * **`-p`** - Сохранить все права доступа к файлу;
   * **`--verbose`** - 	Выводить подробную информацию процесса;
   * **`--totals`** - Выводить итоговую информацию завершенного процесса;
   * **`-z`** - Перенаправить вывод в команду *gzip*.
---
* **`make`** - утилита предназначенная для автоматизации преобразования файлов из одной формы в другую.
Правила преобразования задаются в скрипте с именем Makefile, который должен находиться в корне рабочей директории проекта.
Сам скрипт состоит из набора правил, которые в свою очередь описывается:

   1. **Целями** - то, что данное правило делает;
   2. **Реквизитами** - то, что необходимо для выполнения правила и получения целей;
   3. **Командами** - выполняющими данные преобразования;
   
   **Основные цели:**

   * **`all`** - является стандартной целью по умолчанию. При вызове make ее можно явно не указывать.
   * **`clean`** - очистить каталог от всех файлов полученных в результате компиляции.
   * **`install`** - произвести инсталляцию
   * **`uninstall`** - и деинсталляцию соответственно.
---
* **`yum`** - пакетный менеджер с открытым исходным кодом, разработанный в компании RedHat для работы с пакетами в формате RPM.
С помощью него пользователи и системные администраторы могут устанавливать, удалять и обновлять пакеты в системах, основанных на RedHat.

   **`$sudo yum опции команда имя_пакета`**

   **Основные функции:**
   
   * **`install`** - установить пакет;
   * **`update`** - обновить пакет или систему;
   * **`update-to`** - обновить пакет до версии;
   * **`update-minimal`** - обновлять только исправления ошибок;
   * **`upgrade`** - полное обновление с обработкой дополнительных возможностей пакетов и их зависимостей;
   * **`distro-sync`** - синхронизировать состояния системы или пакета с репозиторием. Например, если была установлена версия пакета 4,
а в репозитории только 3, то будет выполнено понижение версии;
   * **`remove`** - удалить пакет;
   * **`autoremove`** - очистить больше ненужные пакеты;
   * **`list`** - показать список пакетов;
   * **`provides`** - поиск пакета по функциональности;
   * **`search`** - поиск пакета по имени;
   * **`info`** - информация о пакете;
   * **`clean`** - очистить кэш пакетного менеджера
   * **`groups`** - управление группами пакетов;
   * **`reinstall`** - переустановить пакет;
   * **`downgrade`** - понизить версию пакета;
   * **`deplist`** - вывести все зависимости пакета;
   * **`repolist`** - отобразить список репозиториев;
   * **`fssnapshot`** - управление снимками состояния системы;
   * **`check`** - проверить базу данных пакетов на целостность.

   **Основные параметры:**

   * **`-y`** - всегда отвечать на вопросы утилиты утвердительно;
   * **`-q`** - минимальный вывод;
   * **`-v`** - максимальный вывод;
   * **`-x`** - игнорировать пакет;
   * **`-С`** - работать из кэша.
---
* **`rpm`** - пакетный менеджер с открытым исходным кодом, разработанный в компании RedHat для работы с пакетами в формате RPM.
С помощью него пользователи и системные администраторы могут устанавливать, удалять и обновлять пакеты в системах, основанных на RedHat.
Позволяет устанавливать программное обеспечение не из официальных репозиториев.

   **`$ rpm -режимопции пакет`**

   **Основные режимы:**
   
   * **`-q`** - запрос, получение информации;
   * **`-i`** - установка;
   * **`-V`** - проверка пакетов;
   * **`-U`** - обновление;
   * **`-e`** - удаление.

   **Основные опции:**

   * **`-v`** - показать подробную информацию;
   * **`--vv`** - выводить отладочную информацию;
   * **`--quiet `** - выводить как можно меньше информации;
   * **`-h`** - выводить статус-бар;
   * **`--percent`** - выводить информацию в процентах о процессе распаковки;
   * **`--force`** - выполнять действие принудительно;
   * **`--nodeps`** - не проверять зависимости;
   * **`--replacefiles`** - заменять все старые файлы на новые без предупреждений;
   * **`-i`** - получить информацию о пакете;
   * **`-l`** - список файлов пакета;
   * **`-R`** - вывести пакеты, от которых зависит этот пакет;
---
* **`wget`** - Утилита для работы с сетью через протоколы HTTP, HTTPS и FTP. Позволяет скачивать файлы

   **`$ wget опции аддресс_ссылки`**

   **Основные опции:**
   
   * **`-V`** - вывести версию программы
   * **`-h`** - вывести справку
   * **`-b`** - работать в фоновом режиме
   * **`-o`** - указать лог файл
   * **`-d`** - включить режим отладки
   * **`-v`** - выводить максимум информации о работе утилиты
   * **`-q`** - выводить минимум информации о работе
   * **`-i file`** - прочитать URL из файла
   * **`--force-html`** - читать файл указанный в предыдущем параметре как html
   * **`-t`** - количество попыток подключения к серверу
   * **`-O`** - файл в который будут сохранены полученные данные
   * **`-c`** - продолжить ранее прерванную загрузку
   * **`-S`** - вывести ответ сервера
   * **`--spider`** - проверить работоспособность URL
   * **`-T time`** - таймаут подключения к серверу
   * **`--limit-rare`** - ограничить скорость загрузки
   * **`-w`** - интервал между запросами
   * **`-Q`** - максимальный размер загрузки
   * **`-4`** - использовать протокол ipv4
   * **`-6`** - использовать протокол ipv6
   * **`-U`** - строка USER AGENT отправляемая серверу
   * **`-r`** - рекурсивная работа утилиты
   * **`-l`** - глубина при рекурсивном сканировании
   * **`-k`** - конвертировать ссылки в локальные при загрузке страниц
   * **`-P`** - каталог, в который будут загружаться файлы
   * **`-m`** - скачать сайт на локальную машину
   * **`-p`** - во время загрузки сайта скачивать все необходимые ресурсы
---